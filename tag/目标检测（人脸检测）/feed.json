{
    "version": "https://jsonfeed.org/version/1",
    "title": "且听风吟，御剑于心！ • All posts by \"目标检测（人脸检测）\" tag",
    "description": "",
    "home_page_url": "https://leezhao415.github.io",
    "items": [
        {
            "id": "https://leezhao415.github.io/2022/03/06/%E3%80%90%E7%B2%BE%E5%8D%8E%E3%80%91%E6%9C%80%E5%BC%BA%E5%85%AD%E5%A4%A7%E5%BC%80%E6%BA%90%E8%BD%BB%E9%87%8F%E7%BA%A7%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B%E9%A1%B9%E7%9B%AE%E5%88%86%E6%9E%90/",
            "url": "https://leezhao415.github.io/2022/03/06/%E3%80%90%E7%B2%BE%E5%8D%8E%E3%80%91%E6%9C%80%E5%BC%BA%E5%85%AD%E5%A4%A7%E5%BC%80%E6%BA%90%E8%BD%BB%E9%87%8F%E7%BA%A7%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B%E9%A1%B9%E7%9B%AE%E5%88%86%E6%9E%90/",
            "title": "【精华】最强六大开源轻量级人脸检测项目分析",
            "date_published": "2022-03-06T07:15:55.000Z",
            "content_html": "<meta name=\"referrer\" content=\"no-referrer\">\n<hr>\n<p><strong>文章目录</strong></p>\n<!-- toc -->\n<ul>\n<li><a href=\"#%E7%B2%BE%E5%8D%8E%E6%9C%80%E5%BC%BA%E5%85%AD%E5%A4%A7%E5%BC%80%E6%BA%90%E8%BD%BB%E9%87%8F%E7%BA%A7%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B%E9%A1%B9%E7%9B%AE%E5%88%86%E6%9E%90\">【精华】最强六大开源轻量级人脸检测项目分析</a>\n<ul>\n<li><a href=\"#1-libfacedetection\">1 libfacedetection</a></li>\n<li><a href=\"#2-ultra-light-fast-generic-face-detector-1mb\">2 Ultra-Light-Fast-Generic-Face-Detector-1MB</a></li>\n<li><a href=\"#3-a-light-and-fast-face-detector-for-edge-devices\">3 A-Light-and-Fast-Face-Detector-for-Edge-Devices</a></li>\n<li><a href=\"#4-centerface\">4 CenterFace</a></li>\n<li><a href=\"#5-dbface\">5 DBFace</a></li>\n<li><a href=\"#6-retinaface-mobilenet025\">6 RetinaFace MobileNet0.25</a></li>\n</ul>\n</li>\n</ul>\n<!-- tocstop -->\n<hr>\n<h4><span id=\"精华最强六大开源轻量级人脸检测项目分析\"> 【精华】最强六大开源轻量级人脸检测项目分析</span></h4>\n<p>随着深度学习的兴起，工业界和学术界越来越多的使用基于深度学习的方法，而不是传统的基于模板匹配，纹理提取或者像素积分图等方法。因为人脸检测本身并不属于特别复杂的任务，因此轻量级的深度学习模型即可满足该任务。本文汇总了六大开源的人脸检测项目。</p>\n<p>虽说深度学习是个黑箱，但基于深度学习的通用目标检测算法（例 如 Faster-RCNN，SSD，YoloV3、 RetinaNet 等）的检测效果和鲁棒性，远远的超过基于纹理、边缘、Harr 特征、Sift 特征的传统计算机视觉方法，而且近几年随着<strong>模型压缩、量化技术</strong>的进步，模型运行速度也越来越快。</p>\n<p>对于通用的目标检测算法，以大家常用的 SSD 和 YoloV3 算法为例，因为算法在设计之初，是为 Pascal VOC 或者 COCO 这种 20 类 和 80 类的多类别任务设计的，因此其 backbone 网络，也就是特征提取网络一般使用 VGG16、Darknet53、ResNet18 这种网络，这些网络的一个通用特点是，其卷积层的卷积核数目通常比较多（例如 256，512），导致模型参数量动辄几千万，运算量巨大。</p>\n<p>如果我们拿这些通用目标检测算法来检测一类，比如只检测人脸、行人或者车辆时，使用那么多的卷积核数量、那么深的网络其实是不必要的。如果要检测 80 个类别，可能需要更多参数量来拟合，但是对于一两个类别，其实是有点<strong>杀鸡用宰牛刀</strong>了，如果你的任务不复杂，却用了 ResNet18/34 这种网络，你会发现很多卷积核的激活，其实是 0，导致白白多增加了很多计算量。所以，针对特定的人脸检测任务，其实一些非常轻量级的网络即可满足任务要求。</p>\n<p>对于比赛刷榜，我们可以用很大的模型，例如某 AI 公司在 WiderFace 上夺冠的模型，结构用 RetinaNet，backbone 用 ResNet152，另外，FPN 结构也安排上，多模型融合安排上，更多的 anchor 组数安排上，这样的模型对于刷榜非常实用，但是在工业界非常不实用，假如要部署到 ARM 的嵌入式设备上，大概率直接卡死。</p>\n<p>随着 AI 落地为王时代的到来，大家越来越注重精度和速度的权衡（trade off），本文精选了六大轻量级的开源人脸检测项目，并对其进行简单赏析和介绍。</p>\n<p>言归正传，下面我们按照 Github 上 star 数目从高到低依次介绍。</p>\n<h5><span id=\"1-libfacedetection\"> 1 libfacedetection</span></h5>\n<p>Github star: 9.3k</p>\n<p>作者：于仕琪</p>\n<p>链接：<a href=\"https://github.com/ShiqiYu/libfacedetection\">https://github.com/ShiqiYu/libfacedetection</a></p>\n<p>模型参数量：232 万，体积 3.34M</p>\n<p>前几天元峰已经对该项目进行过一次介绍了，该项目使用一个 SSD 架构的人脸检测模型，在酷睿 i7 的 CPU 上，320x240 分辨率下可以达到 296.21 FPS，下图是该项目在不同分辨率和单线程下的速度概览。</p>\n<p><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jbV99iaFxZSCXdqvs8lbr1hD0X3AIs3iajYXmuVEianibibG3w2ibTC3D9dySRiaIauXtibJzlWu3kddD4IXA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1\" alt=\"图片\"></p>\n<p>模型结构也比较简单，就是一个轻量级的 SSD 架构，共四个定位层，而且借鉴了 RetinFace 的关键点方法，可以同时回归 5 个关键点。模型体积只有 232 万，体积仅有 3.34M</p>\n<center><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jYxiaA1UFYibXU1lMicXZY6k4nhGribokxWkRohPNxC8XbRNNtLEfDxFCjJ2XXnXlY8hXb7xpcSbzU9RQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\" style=\"zoom:70%;\"></center>\n<p>该项目的最大亮点，其实是于老师搞了一个纯 C++ 的推理版本，不依赖第三方深度学习库，非常有利于工程部署。</p>\n<h5><span id=\"2-ultra-light-fast-generic-face-detector-1mb\"> 2 Ultra-Light-Fast-Generic-Face-Detector-1MB</span></h5>\n<p>Github star: 4.7k</p>\n<p>作者：Linzaer</p>\n<p>链接：<a href=\"https://github.com/Linzaer/Ultra-Light-Fast-Generic-Face-Detector-1MB\">https://github.com/Linzaer/Ultra-Light-Fast-Generic-Face-Detector-1MB</a></p>\n<p>体积：1.04M， int8 量化后 300KB</p>\n<p>该模型是针对边缘计算设备设计的人脸检测模型。并提供了精简网络和 RFB 网络两种，在 320x240 的输入分辨率下 90~109 FPS 左右。</p>\n<p>该模型的结构与上述于老师的模型结构非常相似，也是 SSD 架构，共有 4 个定位层，模型结构如下图所示。</p>\n<center><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jbV99iaFxZSCXdqvs8lbr1hDrV5xqXRtlqXiaiakBTwHDRDDic62JGDMYibW2c3XuLxia6fSUKYiaGRBibmzg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\" style=\"zoom:80%;\"></center>\n<p>另外，该项目提供了 NCNN、MNN、Caffe、Onnx、Opencv 的推理代码，可以给我们部署项目提供大量参考样例。</p>\n<h5><span id=\"3-a-light-and-fast-face-detector-for-edge-devices\"> 3 A-Light-and-Fast-Face-Detector-for-Edge-Devices</span></h5>\n<p>Github star: <strong>897</strong></p>\n<p>作者：YonghaoHe</p>\n<p>链接：<a href=\"https://github.com/YonghaoHe/A-Light-and-Fast-Face-Detector-for-Edge-Devices\">https://github.com/YonghaoHe/A-Light-and-Fast-Face-Detector-for-Edge-Devices</a></p>\n<p>体积：6.1 M</p>\n<p>从名字可以看出来，这也是一个面向边缘设备的检测模型，该模型同样是 SSD 架构的，不过相比前述两个模型，该模型有八个定位层，分别对应 tiny、small、medium 和 large 四个尺度，backbone 网络共有 25 个卷积层。</p>\n<center><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jbV99iaFxZSCXdqvs8lbr1hD1Htn5CjPXVLdcib6Ha2PS64GGUvnEQ1VrKN1lSX8p4icyoicwRia057bkg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\" style=\"zoom:70%;\"></center>\n<p>该模型在 Nvidia TX2 下，320x240 分辨率下可以达到 50.92 FPS。</p>\n<p>另外，该 repo 还提供了人头检测、行人检测、车辆检测的代码和模型。</p>\n<h5><span id=\"4-centerface\"> 4 CenterFace</span></h5>\n<p>Github star: 607</p>\n<p>作者：Star-Clouds</p>\n<p>链接：<a href=\"https://github.com/Star-Clouds/CenterFace\">https://github.com/Star-Clouds/CenterFace</a></p>\n<p>体积：7.3 M、同精度小模型 2.3M</p>\n<p>CenterFace 是 anchor free 的模型结构，应该算是 CenterNet 针对人脸检测任务的特例，这一点上跟 RetinaFace 作为 RetinaNet 的在人脸任务的特例有异曲同工之妙，而且该模型同时回归了五个关键点。</p>\n<p>该网络的 backbone 是 MobileNetV2，额外添加了 FPN 结构。</p>\n<center><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jbV99iaFxZSCXdqvs8lbr1hD3icPo8er3sCM2mHu274JGUyNebiaib6l9GgZKnrPllUfPEzySnjTfvtSA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\" style=\"zoom:80%;\"></center>\n<p>下图是 CenterFace 的速度，在 2080TI 上可以仅 4.4ms。Anchor Free 的模型，没有 NMS 的过程，也能节省很多后处理时间。</p>\n<p><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jbV99iaFxZSCXdqvs8lbr1hDpkOicanQzLGajibia9FXWtH6iaxPnm2zOA4h0PPBUibibK2ibZLjqPhAAZ5DA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1\" alt=\"图片\"></p>\n<h5><span id=\"5-dbface\"> 5 DBFace</span></h5>\n<p>Github star: <strong>195</strong></p>\n<p>作者：dlunion</p>\n<p>链接：<a href=\"https://github.com/dlunion/DBFace\">https://github.com/dlunion/DBFace</a></p>\n<p>体积：7.03M</p>\n<p>DBFace 是一个 Anchor Free 的网络结构，模型原理可以说与 CenterFace 非常相似。这里不再展开详细的介绍了。</p>\n<h5><span id=\"6-retinaface-mobilenet025\"> 6 RetinaFace MobileNet0.25</span></h5>\n<p>Github star: 不好定义（6.4k）</p>\n<p>作者：yangfly</p>\n<p>链接：<a href=\"https://github.com/deepinsight/insightface/issues/669\">https://github.com/deepinsight/insightface/issues/669</a></p>\n<p>体积：1.68M</p>\n<p>这个项目来自于知名的 InsightFace 项目，该项目在 Github 有 6.4k star，InsightFace 提出了知名的 RetinaFace、ArcFace 算法，而且开源了详细的训练代码和预训练模型，可以说是非常良心的开源项目。</p>\n<p>但是 RetinaFace（应该是受 RetianNet 的结构启发而成）本身的 backbone 是 ResNet50，yangfly 大佬将其替换为了 MobileNet0.25，模型大小仅 1.68MB。RetinaFace 的模型结构如下，这里的 backbone 网络是 MobileNet 0.25。</p>\n<center><img src=\"https://mmbiz.qpic.cn/mmbiz_png/b6P5kstO2jbV99iaFxZSCXdqvs8lbr1hDtXkb2xBicqVHiasb3EUxfwtkN7WoqibElWgOicGXJAbpw7Tial7YlFLLM7w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1\" alt=\"图片\" style=\"zoom:70%;\"></center>\n<p>​    根据作者的开源结果，我们对以上 6 大开源轻量级人脸检测做一个速度和准确度的对比汇总。</p>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>模型大小（MB）</th>\n<th>速度（FPS）</th>\n<th>WiderFace Easy</th>\n<th>WiderFace Medium</th>\n<th>WiderFace Hard</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>libfacedetection</td>\n<td>3.34</td>\n<td>296（i7CPU， 320x240）</td>\n<td>0.773</td>\n<td>0.718</td>\n<td>0.485</td>\n</tr>\n<tr>\n<td>UltraLightFace</td>\n<td>1.04</td>\n<td>109（ 320x240）</td>\n<td>0.853</td>\n<td>0.819</td>\n<td>0.539</td>\n</tr>\n<tr>\n<td>LightFast</td>\n<td>5.81</td>\n<td>131（Titan xp， 640x480）</td>\n<td>0.910</td>\n<td>0.881</td>\n<td>0.780</td>\n</tr>\n<tr>\n<td>CenterFace</td>\n<td>7.3</td>\n<td>227（2080TI，640x480）</td>\n<td>0.931</td>\n<td>0.924</td>\n<td>0.870</td>\n</tr>\n<tr>\n<td>DBFace</td>\n<td>7.03</td>\n<td></td>\n<td>0.905</td>\n<td>0.896</td>\n<td>0.794</td>\n</tr>\n<tr>\n<td>RetinaFace MobileNet0.25</td>\n<td>1.68</td>\n<td></td>\n<td>0.887</td>\n<td>0.87</td>\n<td>0.791</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "人工智能",
                "目标检测（人脸检测）"
            ]
        }
    ]
}